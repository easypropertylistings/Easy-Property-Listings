!function(e){"use strict";var t={init:function(a){var r=this;return r.data("jqv")&&null!=r.data("jqv")||(a=t._saveOptions(r,a),e(document).on("click",".formError",(function(){e(this).fadeOut(150,(function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}))}))),this},attach:function(a){var r=this;return(a=a?t._saveOptions(r,a):r.data("jqv")).validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",a.binded&&(r.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),r.on("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),r.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)),a.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:r},t.updatePromptsPosition),r.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),r.removeData("jqv_submitButton"),r.on("submit",t._onSubmitEvent),this},detach:function(){var a=this,r=a.data("jqv");return a.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),a.off("click","["+r.validateAttribute+"*=validate][type=checkbox],["+r.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),a.off(r.validationEventTrigger,"["+r.validateAttribute+"*=validate][class*=datepicker]",t._onFieldEvent),a.off("submit",t._onSubmitEvent),a.removeData("jqv"),a.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),a.removeData("jqv_submitButton"),r.autoPositionUpdate&&e(window).off("resize",t.updatePromptsPosition),this},validate:function(){var a,r=e(this),i=null;if(r.is("form")||r.hasClass("validationEngineContainer")){if(r.hasClass("validating"))return!1;r.addClass("validating");var o=r.data("jqv");i=t._validateFields(this);setTimeout((function(){r.removeClass("validating")}),100),i&&o.onSuccess?o.onSuccess():!i&&o.onFailure&&o.onFailure()}else r.is("form")||r.hasClass("validationEngineContainer")?r.removeClass("validating"):(o=(a=r.closest("form, .validationEngineContainer")).data("jqv")?a.data("jqv"):e.validationEngine.defaults,i=t._validateField(r,o));return o.onValidationComplete?!!o.onValidationComplete(a,i):i},updatePromptsPosition:function(a){var r,i;a&&this==window?(i=a.data.formElem,r=a.data.noAnimation):i=e(this.closest("form, .validationEngineContainer"));var o=(o=i.data("jqv"))||t._saveOptions(i,o);return i.find("["+o.validateAttribute+"*=validate]").not(":disabled").each((function(){var a=e(this),s=(o.prettySelect&&a.is(":hidden")&&(a=i.find("#"+o.usePrefix+a.attr("id")+o.useSuffix)),t._getPrompt(a)),n=e(s).find(".formErrorContent").html();s&&t._updatePrompt(a,e(s),n,void 0,!1,o,r)})),this},showPrompt:function(e,a,r,i){var o=(o=this.closest("form, .validationEngineContainer").data("jqv"))||t._saveOptions(this,o);return r&&(o.promptPosition=r),o.showArrow=1==i,t._showPrompt(this,e,a,!1,o),this},hide:function(){var a=(r=(r=(a=e(this).closest("form, .validationEngineContainer")).data("jqv"))||t._saveOptions(a,r))&&r.fadeDuration?r.fadeDuration:.3,r=e(this).is("form")||e(this).hasClass("validationEngineContainer")?"parentForm"+t._getClassName(e(this).attr("id")):t._getClassName(e(this).attr("id"))+"formError";return e("."+r).fadeTo(a,.3,(function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})),this},hideAll:function(){var t=(t=this.data("jqv"))?t.fadeDuration:300;return e(".formError").fadeTo(t,300,(function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})),this},_onFieldEvent:function(a){var r=e(this),i=r.closest("form, .validationEngineContainer"),o=i.data("jqv");(o=o||t._saveOptions(i,o)).eventTrigger="field",window.setTimeout((function(){t._validateField(r,o)}),a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=e(this),r=a.data("jqv");if(a.data("jqv_submitButton")){var i=e("#"+a.data("jqv_submitButton"));if(i&&0<i.length&&(i.hasClass("validate-skip")||"true"==i.attr("data-validation-engine-skip")))return!0}return r.eventTrigger="submit",(i=t._validateFields(a))&&r.ajaxFormValidation?(t._validateFormWithAjax(a,r),!1):r.onValidationComplete?!!r.onValidationComplete(a,i):i},_checkAjaxStatus:function(t){var a=!0;return e.each(t.ajaxValidCache,(function(e,t){if(!t)return a=!1})),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var r=a.data("jqv"),i=!1,o=(a.trigger("jqv.form.validating"),null);if(a.find("["+r.validateAttribute+"*=validate]").not(":disabled").each((function(){var s=e(this),n=[];if(e.inArray(s.attr("name"),n)<0)return(i|=t._validateField(s,r))&&null==o&&(o=s.is(":hidden")&&r.prettySelect?s=a.find("#"+r.usePrefix+t._jqSelector(s.attr("id"))+r.useSuffix):(s.data("jqv-prompt-at")instanceof jQuery?s=s.data("jqv-prompt-at"):s.data("jqv-prompt-at")&&(s=e(s.data("jqv-prompt-at"))),s)),!r.doNotShowAllErrosOnSubmit&&(n.push(s.attr("name")),1!=r.showOneMessage||!i)&&void 0})),a.trigger("jqv.form.result",[i]),i){if(r.scroll){var s=o.offset().top,n=o.offset().left,l=r.promptPosition;if("bottomRight"!=(l="string"==typeof l&&-1!=l.indexOf(":")?l.substring(0,l.indexOf(":")):l)&&"bottomLeft"!=l&&(l=t._getPrompt(o))&&(s=l.offset().top),r.scrollOffset&&(s-=r.scrollOffset),r.isOverflown){if(!(l=e(r.overflownDIV)).length)return!1;s+=l.scrollTop()+-parseInt(l.offset().top)-5,e(r.overflownDIV+":not(:animated)").animate({scrollTop:s},1100,(function(){r.focusFirstField&&o.focus()}))}else e("html, body").animate({scrollTop:s},1100,(function(){r.focusFirstField&&o.focus()})),e("html, body").animate({scrollLeft:n},1100)}else r.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(a,r){var i=a.serialize(),o=r.ajaxFormValidationMethod||"GET",s=r.ajaxFormValidationURL||a.attr("action"),n=r.dataType||"json";e.ajax({type:o,url:s,cache:!1,dataType:n,data:i,form:a,methods:t,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(a,r)},error:function(e,a){r.onFailure?r.onFailure(e,a):t._ajaxError(e,a)},success:function(i){if("json"==n&&!0!==i){for(var o=!1,s=0;s<i.length;s++){var l,d,u=i[s],c=u[0];1==(c=e(e("#"+c)[0])).length&&(l=u[2],1==u[1]?""!=l&&l?(r.allrules[l]&&(d=r.allrules[l].alertTextOk)&&(l=d),r.showPrompts&&t._showPrompt(c,l,"pass",!1,r,!0)):t._closePrompt(c):(o|=!0,r.allrules[l]&&(d=r.allrules[l].alertText)&&(l=d),r.showPrompts&&t._showPrompt(c,l,"",!1,r,!0)))}r.onAjaxFormComplete(!o,a,i,r)}else r.onAjaxFormComplete(!0,a,i,r)}})},_validateField:function(a,r,i){if(a.attr("id")||(a.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),!r.validateNonVisibleFields&&(a.is(":hidden")&&!r.prettySelect||a.parent().is(":hidden")))return!1;var o=a.attr(r.validateAttribute);if(!(o=/validate\[(.*)\]/.exec(o)))return!1;for(var s=o[1],n=s.split(/\[|,|\]/),l=a.attr("name"),d="",u="",c=!1,f=!1,v=(r.isError=!1,r.showArrow=!0,0<r.maxErrorsPerField&&(f=!0),e(a.closest("form, .validationEngineContainer"))),p=0;p<n.length;p++)n[p]=n[p].replace(" ",""),""===n[p]&&delete n[p];p=0;for(var m,g=0;p<n.length;p++){if(f&&g>=r.maxErrorsPerField){c||(c=-1!=(m=e.inArray("required",n))&&p<=m);break}var h=void 0;switch(n[p]){case"required":c=!0,h=t._getErrorMessage(v,a,n[p],n,p,r,t._required);break;case"custom":h=t._getErrorMessage(v,a,n[p],n,p,r,t._custom);break;case"groupRequired":var x="["+r.validateAttribute+"*="+n[p+1]+"]",_=v.find(x).eq(0);_[0]!=a[0]&&(t._validateField(_,r,i),r.showArrow=!0),(h=t._getErrorMessage(v,a,n[p],n,p,r,t._groupRequired))&&(c=!0),r.showArrow=!1;break;case"ajax":(h=t._ajax(a,n,p,r))&&(u="load");break;case"minSize":h=t._getErrorMessage(v,a,n[p],n,p,r,t._minSize);break;case"maxSize":h=t._getErrorMessage(v,a,n[p],n,p,r,t._maxSize);break;case"min":h=t._getErrorMessage(v,a,n[p],n,p,r,t._min);break;case"max":h=t._getErrorMessage(v,a,n[p],n,p,r,t._max);break;case"past":h=t._getErrorMessage(v,a,n[p],n,p,r,t._past);break;case"future":h=t._getErrorMessage(v,a,n[p],n,p,r,t._future);break;case"dateRange":x="["+r.validateAttribute+"*="+n[p+1]+"]",r.firstOfGroup=v.find(x).eq(0),r.secondOfGroup=v.find(x).eq(1),(h=r.firstOfGroup[0].value||r.secondOfGroup[0].value?t._getErrorMessage(v,a,n[p],n,p,r,t._dateRange):h)&&(c=!0),r.showArrow=!1;break;case"dateTimeRange":x="["+r.validateAttribute+"*="+n[p+1]+"]",r.firstOfGroup=v.find(x).eq(0),r.secondOfGroup=v.find(x).eq(1),(h=r.firstOfGroup[0].value||r.secondOfGroup[0].value?t._getErrorMessage(v,a,n[p],n,p,r,t._dateTimeRange):h)&&(c=!0),r.showArrow=!1;break;case"maxCheckbox":a=e(v.find("input[name='"+l+"']")),h=t._getErrorMessage(v,a,n[p],n,p,r,t._maxCheckbox);break;case"minCheckbox":a=e(v.find("input[name='"+l+"']")),h=t._getErrorMessage(v,a,n[p],n,p,r,t._minCheckbox);break;case"equals":h=t._getErrorMessage(v,a,n[p],n,p,r,t._equals);break;case"funcCall":h=t._getErrorMessage(v,a,n[p],n,p,r,t._funcCall);break;case"creditCard":h=t._getErrorMessage(v,a,n[p],n,p,r,t._creditCard);break;case"condRequired":void 0!==(h=t._getErrorMessage(v,a,n[p],n,p,r,t._condRequired))&&(c=!0);break;case"funcCallRequired":void 0!==(h=t._getErrorMessage(v,a,n[p],n,p,r,t._funcCallRequired))&&(c=!0)}var C=!1;if("object"==typeof h)switch(h.status){case"_break":C=!0;break;case"_error":h=h.message;break;case"_error_no_prompt":return!0}if(0==p&&0==s.indexOf("funcCallRequired")&&void 0!==h&&(d+=h+"<br/>",g++,C=r.isError=!0),C)break;"string"==typeof h&&(d+=h+"<br/>",r.isError=!0,g++)}!c&&!a.val()&&a.val().length<1&&e.inArray("equals",n)<0&&(r.isError=!1);o=a.prop("type");var b=a.data("promptPosition")||r.promptPosition;return-1==(o=(("radio"==o||"checkbox"==o)&&1<v.find("input[name='"+l+"']").size()&&(a=e("inline"===b?v.find("input[name='"+l+"'][type!=hidden]:last"):v.find("input[name='"+l+"'][type!=hidden]:first")),r.showArrow=r.showArrowOnRadioAndCheckbox),a.is(":hidden")&&r.prettySelect&&(a=v.find("#"+r.usePrefix+t._jqSelector(a.attr("id"))+r.useSuffix)),r.isError&&r.showPrompts?t._showPrompt(a,d,u,!1,r):t._closePrompt(a),a.trigger("jqv.field.result",[a,r.isError,d]),e.inArray(a[0],r.InvalidFields)))?r.isError&&r.InvalidFields.push(a[0]):r.isError||r.InvalidFields.splice(o,1),t._handleStatusCssClasses(a,r),r.isError&&r.onFieldFailure&&r.onFieldFailure(a),!r.isError&&r.onFieldSuccess&&r.onFieldSuccess(a),r.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(a,r,i,o,s,n,l){var d=jQuery.inArray(i,o),u=(d=("custom"!==i&&"funcCall"!==i&&"funcCallRequired"!==i||(i=i+"["+o[d+1]+"]",delete o[d]),i),(r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class")).split(" "));return null!=(i="future"==i||"past"==i||"maxCheckbox"==i||"minCheckbox"==i?l(a,r,o,s,n):l(r,o,s,n))&&(a=t._getCustomErrorMessage(e(r),u,d,n))?a:i},_getCustomErrorMessage:function(e,a,r,i){var o=!1,s=/^custom\[.*\]$/.test(r)?t._validityProp.custom:t._validityProp[r];if((null==s||null==(o=e.attr("data-errormessage-"+s)))&&null==(o=e.attr("data-errormessage"))){if(s="#"+e.attr("id"),void 0!==i.custom_error_messages[s]&&void 0!==i.custom_error_messages[s][r])o=i.custom_error_messages[s][r].message;else if(0<a.length)for(var n=0;n<a.length&&0<a.length;n++){var l="."+a[n];if(void 0!==i.custom_error_messages[l]&&void 0!==i.custom_error_messages[l][r]){o=i.custom_error_messages[l][r].message;break}}o||void 0===i.custom_error_messages[r]||void 0===i.custom_error_messages[r].message||(o=i.custom_error_messages[r].message)}return o},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,a,r,i,o){switch(t.prop("type")){case"radio":case"checkbox":if(o){if(t.prop("checked"))break;return i.allrules[a[r]].alertTextCheckboxMultiple}var s=t.closest("form, .validationEngineContainer"),n=t.attr("name");if(0==s.find("input[name='"+n+"']:checked").size())return 1==s.find("input[name='"+n+"']:visible").size()?i.allrules[a[r]].alertTextCheckboxe:i.allrules[a[r]].alertTextCheckboxMultiple;break;default:s=e.trim(t.val()),n=e.trim(t.attr("data-validation-placeholder"));var l=e.trim(t.attr("placeholder"));if(!s||n&&s==n||l&&s==l)return i.allrules[a[r]].alertText}},_groupRequired:function(a,r,i,o){var s="["+o.validateAttribute+"*="+r[i+1]+"]",n=!1;if(a.closest("form, .validationEngineContainer").find(s).each((function(){if(!t._required(e(this),r,i,o))return!(n=!0)})),!n)return o.allrules[r[i]].alertText},_custom:function(e,t,a,r){var i=t[a+1],o=r.allrules[i];if(o)if(o.regex){var s=o.regex;if(s)return new RegExp(s).test(e.val())?void 0:r.allrules[i].alertText;alert("jqv:custom regex not found - "+i)}else if(o.func){if("function"==typeof(s=o.func))return s(e,t,a,r)?void 0:r.allrules[i].alertText;alert("jqv:custom parameter 'function' is no function - "+i)}else alert("jqv:custom type not allowed "+i);else alert("jqv:custom rule not found - "+i)},_funcCall:function(e,t,a,r){var i,o=t[a+1];if(-1<o.indexOf(".")){for(var s=o.split("."),n=window;s.length;)n=n[s.shift()];i=n}else i=window[o]||r.customFunctions[o];if("function"==typeof i)return i(e,t,a,r)},_funcCallRequired:function(e,a,r,i){return t._funcCall(e,a,r,i)},_equals:function(t,a,r,i){if(a=a[r+1],t.val()!=e("#"+a).val())return i.allrules.equals.alertText},_maxSize:function(e,t,a,r){if((t=t[a+1])<e.val().length)return(a=r.allrules.maxSize).alertText+t+a.alertText2},_minSize:function(e,t,a,r){if(t=t[a+1],e.val().length<t)return(a=r.allrules.minSize).alertText+t+a.alertText2},_min:function(e,t,a,r){if(t=parseFloat(t[a+1]),parseFloat(e.val())<t)return(a=r.allrules.min).alertText2?a.alertText+t+a.alertText2:a.alertText+t},_max:function(e,t,a,r){if((t=parseFloat(t[a+1]))<parseFloat(e.val()))return(a=r.allrules.max).alertText2?a.alertText+t+a.alertText2:a.alertText+t},_past:function(a,r,i,o,s){var n;i=i[o+1],o=e(a.find("*[name='"+i.replace(/^#+/,"")+"']"));if("now"==i.toLowerCase())n=new Date;else if(null!=o.val()){if(o.is(":disabled"))return;n=t._parseDate(o.val())}else n=t._parseDate(i);if(n<t._parseDate(r.val()))return(a=s.allrules.past).alertText2?a.alertText+t._dateToString(n)+a.alertText2:a.alertText+t._dateToString(n)},_future:function(a,r,i,o,s){var n;i=i[o+1],o=e(a.find("*[name='"+i.replace(/^#+/,"")+"']"));if("now"==i.toLowerCase())n=new Date;else if(null!=o.val()){if(o.is(":disabled"))return;n=t._parseDate(o.val())}else n=t._parseDate(i);if(t._parseDate(r.val())<n)return(a=s.allrules.future).alertText2?a.alertText+t._dateToString(n)+a.alertText2:a.alertText+t._dateToString(n)},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,a,r,i){return!(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value)&&t._isDate(i.firstOfGroup[0].value)&&t._isDate(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_dateTimeRange:function(e,a,r,i){return!(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value)&&t._isDateTime(i.firstOfGroup[0].value)&&t._isDateTime(i.secondOfGroup[0].value)&&t._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[a[r]].alertText+i.allrules[a[r]].alertText2},_maxCheckbox:function(e,t,a,r,i){if(a=a[r+1],r=t.attr("name"),a<e.find("input[name='"+r+"']:checked").size())return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+a+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,r,i){if(a=a[r+1],r=t.attr("name"),e.find("input[name='"+r+"']:checked").size()<a)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+a+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,t,a,r){var i=!1,o=e.val().replace(/ +/g,"").replace(/-+/g,"");if(14<=(e=o.length)&&e<=16&&0<parseInt(o)){for(var s,n=0,l=(a=e-1,1),d=new String;s=parseInt(o.charAt(a)),d+=l++%2==0?2*s:s,0<=--a;);for(a=0;a<d.length;a++)n+=parseInt(d.charAt(a));i=n%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(a,r,i,o){r=r[i+1];var s=o.allrules[r],n=(r=s.extraData,s.extraDataDynamic),l={fieldId:a.attr("id"),fieldValue:a.val()};if("object"==typeof r)e.extend(l,r);else if("string"==typeof r){var d=r.split("&");for(i=0;i<d.length;i++){var u=d[i].split("=");u[0]&&u[0]&&(l[u[0]]=u[1])}}if(n){var c=String(n).split(",");for(i=0;i<c.length;i++){var f,v=c[i];e(v).length&&(f=a.closest("form, .validationEngineContainer").find(v).val(),v.replace("#",""),escape(f),l[v.replace("#","")]=f)}}if("field"==o.eventTrigger&&delete o.ajaxValidCache[a.attr("id")],!o.isError&&!t._checkAjaxFieldStatus(a.attr("id"),o))return e.ajax({type:o.ajaxFormValidationMethod,url:s.url,cache:!1,dataType:"json",data:l,field:a,rule:s,methods:t,options:o,beforeSend:function(){},error:function(e,a){o.onFailure?o.onFailure(e,a):t._ajaxError(e,a)},success:function(r){var i,n,l,d=r[0],u=e("#"+d).eq(0);1==u.length&&(i=r[1],n=r[2],i?(o.ajaxValidCache[d]=!0,n?o.allrules[n]&&(l=o.allrules[n].alertTextOk)&&(n=l):n=s.alertTextOk,o.showPrompts&&(n?t._showPrompt(u,n,"pass",!0,o):t._closePrompt(u)),"submit"==o.eventTrigger&&a.closest("form").submit()):(o.ajaxValidCache[d]=!1,o.isError=!0,n?o.allrules[n]&&(l=o.allrules[n].alertText)&&(n=l):n=s.alertText,o.showPrompts&&t._showPrompt(u,n,"",!0,o))),u.trigger("jqv.field.result",[u,o.isError,n])}}),s.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return(t=t==e?e.split("/"):t)==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(a,r,i,o,s,n){a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=e(a.data("jqv-prompt-at")));var l=t._getPrompt(a);n&&(l=!1),e.trim(r)&&(l?t._updatePrompt(a,l,r,i,o,s):t._buildPrompt(a,r,i,o,s))},_buildPrompt:function(a,r,i,o,s){var n=e("<div>");switch(n.addClass(t._getClassName(a.attr("id"))+"formError"),n.addClass("parentForm"+t._getClassName(a.closest("form, .validationEngineContainer").attr("id"))),n.addClass("formError"),i){case"pass":n.addClass("greenPopup");break;case"load":n.addClass("blackPopup")}if(o&&n.addClass("ajaxed"),e("<div>").addClass("formErrorContent").html(r).appendTo(n),i=a.data("promptPosition")||s.promptPosition,s.showArrow){var l=e("<div>").addClass("formErrorArrow");switch(i="string"==typeof i&&-1!=(d=i.indexOf(":"))?i.substring(0,d):i){case"bottomLeft":case"bottomRight":n.find(".formErrorContent").before(l),l.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":l.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),n.append(l)}}s.addPromptClass&&n.addClass(s.addPromptClass);var d=(void 0!==(o=a.attr("data-required-class"))?n.addClass(o):s.prettySelect&&e("#"+a.attr("id")).next().is("select")&&void 0!==(r=e("#"+a.attr("id").substr(s.usePrefix.length).substring(s.useSuffix.length)).attr("data-required-class"))&&n.addClass(r),n.css({opacity:0}),"inline"===i?(n.addClass("inline"),void 0!==a.attr("data-prompt-target")&&0<e("#"+a.attr("data-prompt-target")).length?n.appendTo(e("#"+a.attr("data-prompt-target"))):a.after(n)):a.before(n),t._calculatePosition(a,n,s));return n.css({position:"inline"===i?"relative":"absolute",top:d.callerTopPosition,left:d.callerleftPosition,marginTop:d.marginTopSize,opacity:0}).data("callerField",a),s.autoHidePrompt&&setTimeout((function(){n.animate({opacity:0},(function(){n.closest(".formErrorOuter").remove(),n.remove()}))}),s.autoHideDelay),n.animate({opacity:.87})},_updatePrompt:function(e,a,r,i,o,s,n){a&&(void 0!==i&&("pass"==i?a.addClass("greenPopup"):a.removeClass("greenPopup"),"load"==i?a.addClass("blackPopup"):a.removeClass("blackPopup")),o?a.addClass("ajaxed"):a.removeClass("ajaxed"),a.find(".formErrorContent").html(r),o={top:(i=t._calculatePosition(e,a,s)).callerTopPosition,left:i.callerleftPosition,marginTop:i.marginTopSize},n?a.css(o):a.animate(o))},_closePrompt:function(e){var a=t._getPrompt(e);a&&a.fadeTo("fast",0,(function(){a.parent(".formErrorOuter").remove(),a.remove()}))},closePrompt:function(e){return t._closePrompt(e)},_getPrompt:function(a){var r=e(a).closest("form, .validationEngineContainer").attr("id");a=t._getClassName(a.attr("id"))+"formError";if(a=e("."+t._escapeExpression(a)+".parentForm"+t._getClassName(r))[0])return e(a)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var a=e(document),r=e("body");t=t&&t.hasClass("rtl")||t&&"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase()||r.hasClass("rtl")||"rtl"===(r.attr("dir")||"").toLowerCase();return Boolean(t)},_calculatePosition:function(e,t,a){var r,i,o=e.width(),s=e.position().left,n=e.position().top,l=(e.height(),r=0),d=-t.height(),u="",c=0,f=0;switch("string"==typeof(a=e.data("promptPosition")||a.promptPosition)&&-1!=a.indexOf(":")&&(u=a.substring(a.indexOf(":")+1),a=a.substring(0,a.indexOf(":")),-1!=u.indexOf(",")&&(i=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),f=parseInt(i),isNaN(f))&&(f=0),c=parseInt(u),isNaN(u))&&(u=0),a){default:case"topRight":r+=s+o-27,l+=n;break;case"topLeft":l+=n,r+=s;break;case"centerRight":l=n+4,r=s+e.outerWidth(!(d=0))+5;break;case"centerLeft":r=s-(t.width()+2),l=n+4,d=0;break;case"bottomLeft":l=n+e.height()+5,d=0,r=s;break;case"bottomRight":r=s+o-27,l=n+e.height()+5,d=0;break;case"inline":d=l=r=0}return{callerTopPosition:(l+=f)+"px",callerleftPosition:(r+=c)+"px",marginTopSize:d+"px"}},_saveOptions:function(t,a){e.validationEngineLanguage?r=e.validationEngineLanguage.allRules:e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page"),e.validationEngine.defaults.allrules=r;var r=e.extend(!0,{},e.validationEngine.defaults,a);return t.data("jqv",r),r},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,a,r,i){for(var o,s=r+1;s<a.length;s++)if((o=jQuery("#"+a[s]).first()).length&&null==t._required(o,["required"],0,i,!0))return t._required(e,["required"],0,i)},_submitButtonClick:function(t){var a=e(this);a.closest("form, .validationEngineContainer").data("jqv_submitButton",a.attr("id"))}};e.fn.validationEngine=function(a){var r=e(this);return r[0]?"string"==typeof a&&"_"!=a.charAt(0)&&t[a]?("showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&t.init.apply(r),t[a].apply(r,Array.prototype.slice.call(arguments,1))):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist in jQuery.validationEngine"):(t.init.apply(r,arguments),t.attach.apply(r)):r},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},e((function(){e.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"}))}(jQuery);