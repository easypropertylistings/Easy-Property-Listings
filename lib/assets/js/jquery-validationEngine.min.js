!function(C){"use strict";var b={init:function(e){var t=this;return t.data("jqv")&&null!=t.data("jqv")||(e=b._saveOptions(t,e),C(document).on("click",".formError",function(){C(this).fadeOut(150,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()})})),this},attach:function(e){var t=this,e=e?b._saveOptions(t,e):t.data("jqv");return e.validateAttribute=t.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",e.binded&&(t.on(e.validationEventTrigger,"["+e.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",b._onFieldEvent),t.on("click","["+e.validateAttribute+"*=validate][type=checkbox],["+e.validateAttribute+"*=validate][type=radio]",b._onFieldEvent),t.on(e.validationEventTrigger,"["+e.validateAttribute+"*=validate][class*=datepicker]",{delay:300},b._onFieldEvent)),e.autoPositionUpdate&&C(window).bind("resize",{noAnimation:!0,formElem:t},b.updatePromptsPosition),t.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick),t.removeData("jqv_submitButton"),t.on("submit",b._onSubmitEvent),this},detach:function(){var e=this,t=e.data("jqv");return e.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",b._onFieldEvent),e.off("click","["+t.validateAttribute+"*=validate][type=checkbox],["+t.validateAttribute+"*=validate][type=radio]",b._onFieldEvent),e.off(t.validationEventTrigger,"["+t.validateAttribute+"*=validate][class*=datepicker]",b._onFieldEvent),e.off("submit",b._onSubmitEvent),e.removeData("jqv"),e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick),e.removeData("jqv_submitButton"),t.autoPositionUpdate&&C(window).off("resize",b.updatePromptsPosition),this},validate:function(){var e,t=C(this),a=null;if(t.is("form")||t.hasClass("validationEngineContainer")){if(t.hasClass("validating"))return!1;t.addClass("validating");var r=t.data("jqv"),a=b._validateFields(this);setTimeout(function(){t.removeClass("validating")},100),a&&r.onSuccess?r.onSuccess():!a&&r.onFailure&&r.onFailure()}else t.is("form")||t.hasClass("validationEngineContainer")?t.removeClass("validating"):(r=(e=t.closest("form, .validationEngineContainer")).data("jqv")?e.data("jqv"):C.validationEngine.defaults,a=b._validateField(t,r));return r.onValidationComplete?!!r.onValidationComplete(e,a):a},updatePromptsPosition:function(e){var r,i;e&&this==window?(i=e.data.formElem,r=e.data.noAnimation):i=C(this.closest("form, .validationEngineContainer"));var o=(o=i.data("jqv"))||b._saveOptions(i,o);return i.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=C(this),t=(o.prettySelect&&e.is(":hidden")&&(e=i.find("#"+o.usePrefix+e.attr("id")+o.useSuffix)),b._getPrompt(e)),a=C(t).find(".formErrorContent").html();t&&b._updatePrompt(e,C(t),a,void 0,!1,o,r)}),this},showPrompt:function(e,t,a,r){var i=(i=this.closest("form, .validationEngineContainer").data("jqv"))||b._saveOptions(this,i);return a&&(i.promptPosition=a),i.showArrow=1==r,b._showPrompt(this,e,t,!1,i),this},hide:function(){var e=C(this).closest("form, .validationEngineContainer"),t=e.data("jqv"),e=(t=t||b._saveOptions(e,t))&&t.fadeDuration?t.fadeDuration:.3,t=C(this).is("form")||C(this).hasClass("validationEngineContainer")?"parentForm"+b._getClassName(C(this).attr("id")):b._getClassName(C(this).attr("id"))+"formError";return C("."+t).fadeTo(e,.3,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()}),this},hideAll:function(){var e=this.data("jqv"),e=e?e.fadeDuration:300;return C(".formError").fadeTo(e,300,function(){C(this).parent(".formErrorOuter").remove(),C(this).remove()}),this},_onFieldEvent:function(e){var t=C(this),a=t.closest("form, .validationEngineContainer"),r=a.data("jqv");(r=r||b._saveOptions(a,r)).eventTrigger="field",window.setTimeout(function(){b._validateField(t,r)},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=C(this),t=e.data("jqv");if(e.data("jqv_submitButton")){var a=C("#"+e.data("jqv_submitButton"));if(a&&0<a.length&&(a.hasClass("validate-skip")||"true"==a.attr("data-validation-engine-skip")))return!0}t.eventTrigger="submit";a=b._validateFields(e);return a&&t.ajaxFormValidation?(b._validateFormWithAjax(e,t),!1):t.onValidationComplete?!!t.onValidationComplete(e,a):a},_checkAjaxStatus:function(e){var a=!0;return C.each(e.ajaxValidCache,function(e,t){if(!t)return a=!1}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var r=a.data("jqv"),i=!1,o=(a.trigger("jqv.form.validating"),null);if(a.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=C(this),t=[];if(C.inArray(e.attr("name"),t)<0)return(i|=b._validateField(e,r))&&null==o&&(o=e.is(":hidden")&&r.prettySelect?e=a.find("#"+r.usePrefix+b._jqSelector(e.attr("id"))+r.useSuffix):(e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=C(e.data("jqv-prompt-at"))),e)),!r.doNotShowAllErrosOnSubmit&&(t.push(e.attr("name")),(1!=r.showOneMessage||!i)&&void 0)}),a.trigger("jqv.form.result",[i]),i){if(r.scroll){var e=o.offset().top,t=o.offset().left,s=r.promptPosition;if("bottomRight"==(s="string"==typeof s&&-1!=s.indexOf(":")?s.substring(0,s.indexOf(":")):s)||"bottomLeft"==s||(s=b._getPrompt(o))&&(e=s.offset().top),r.scrollOffset&&(e-=r.scrollOffset),r.isOverflown){s=C(r.overflownDIV);if(!s.length)return!1;e+=s.scrollTop()+-parseInt(s.offset().top)-5,C(r.overflownDIV+":not(:animated)").animate({scrollTop:e},1100,function(){r.focusFirstField&&o.focus()})}else C("html, body").animate({scrollTop:e},1100,function(){r.focusFirstField&&o.focus()}),C("html, body").animate({scrollLeft:t},1100)}else r.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(n,l){var e=n.serialize(),t=l.ajaxFormValidationMethod||"GET",a=l.ajaxFormValidationURL||n.attr("action"),d=l.dataType||"json";C.ajax({type:t,url:a,cache:!1,dataType:d,data:e,form:n,methods:b,options:l,beforeSend:function(){return l.onBeforeAjaxFormValidation(n,l)},error:function(e,t){l.onFailure?l.onFailure(e,t):b._ajaxError(e,t)},success:function(e){if("json"==d&&!0!==e){for(var t=!1,a=0;a<e.length;a++){var r,i,o=e[a],s=o[0],s=C(C("#"+s)[0]);1==s.length&&(r=o[2],1==o[1]?""!=r&&r?(l.allrules[r]&&(i=l.allrules[r].alertTextOk)&&(r=i),l.showPrompts&&b._showPrompt(s,r,"pass",!1,l,!0)):b._closePrompt(s):(t|=!0,l.allrules[r]&&(i=l.allrules[r].alertText)&&(r=i),l.showPrompts&&b._showPrompt(s,r,"",!1,l,!0)))}l.onAjaxFormComplete(!t,n,e,l)}else l.onAjaxFormComplete(!0,n,e,l)}})},_validateField:function(e,t,u){if(e.attr("id")||(e.attr("id","form-validation-field-"+C.validationEngine.fieldIdCounter),++C.validationEngine.fieldIdCounter),!t.validateNonVisibleFields&&(e.is(":hidden")&&!t.prettySelect||e.parent().is(":hidden")))return!1;var a=e.attr(t.validateAttribute),a=/validate\[(.*)\]/.exec(a);if(!a)return!1;for(var c=a[1],r=c.split(/\[|,|\]/),i=e.attr("name"),f="",v="",o=!1,p=!1,s=(t.isError=!1,t.showArrow=!0,0<t.maxErrorsPerField&&(p=!0),C(e.closest("form, .validationEngineContainer"))),n=0;n<r.length;n++)r[n]=r[n].replace(" ",""),""===r[n]&&delete r[n];for(var m,n=0,g=0;n<r.length;n++){if(p&&g>=t.maxErrorsPerField){o||(o=-1!=(m=C.inArray("required",r))&&n<=m);break}var l=void 0;switch(r[n]){case"required":o=!0,l=b._getErrorMessage(s,e,r[n],r,n,t,b._required);break;case"custom":l=b._getErrorMessage(s,e,r[n],r,n,t,b._custom);break;case"groupRequired":var d="["+t.validateAttribute+"*="+r[n+1]+"]",h=s.find(d).eq(0);h[0]!=e[0]&&(b._validateField(h,t,u),t.showArrow=!0),(l=b._getErrorMessage(s,e,r[n],r,n,t,b._groupRequired))&&(o=!0),t.showArrow=!1;break;case"ajax":(l=b._ajax(e,r,n,t))&&(v="load");break;case"minSize":l=b._getErrorMessage(s,e,r[n],r,n,t,b._minSize);break;case"maxSize":l=b._getErrorMessage(s,e,r[n],r,n,t,b._maxSize);break;case"min":l=b._getErrorMessage(s,e,r[n],r,n,t,b._min);break;case"max":l=b._getErrorMessage(s,e,r[n],r,n,t,b._max);break;case"past":l=b._getErrorMessage(s,e,r[n],r,n,t,b._past);break;case"future":l=b._getErrorMessage(s,e,r[n],r,n,t,b._future);break;case"dateRange":d="["+t.validateAttribute+"*="+r[n+1]+"]";t.firstOfGroup=s.find(d).eq(0),t.secondOfGroup=s.find(d).eq(1),(l=t.firstOfGroup[0].value||t.secondOfGroup[0].value?b._getErrorMessage(s,e,r[n],r,n,t,b._dateRange):l)&&(o=!0),t.showArrow=!1;break;case"dateTimeRange":d="["+t.validateAttribute+"*="+r[n+1]+"]";t.firstOfGroup=s.find(d).eq(0),t.secondOfGroup=s.find(d).eq(1),(l=t.firstOfGroup[0].value||t.secondOfGroup[0].value?b._getErrorMessage(s,e,r[n],r,n,t,b._dateTimeRange):l)&&(o=!0),t.showArrow=!1;break;case"maxCheckbox":e=C(s.find("input[name='"+i+"']")),l=b._getErrorMessage(s,e,r[n],r,n,t,b._maxCheckbox);break;case"minCheckbox":e=C(s.find("input[name='"+i+"']")),l=b._getErrorMessage(s,e,r[n],r,n,t,b._minCheckbox);break;case"equals":l=b._getErrorMessage(s,e,r[n],r,n,t,b._equals);break;case"funcCall":l=b._getErrorMessage(s,e,r[n],r,n,t,b._funcCall);break;case"creditCard":l=b._getErrorMessage(s,e,r[n],r,n,t,b._creditCard);break;case"condRequired":void 0!==(l=b._getErrorMessage(s,e,r[n],r,n,t,b._condRequired))&&(o=!0);break;case"funcCallRequired":void 0!==(l=b._getErrorMessage(s,e,r[n],r,n,t,b._funcCallRequired))&&(o=!0)}var _=!1;if("object"==typeof l)switch(l.status){case"_break":_=!0;break;case"_error":l=l.message;break;case"_error_no_prompt":return!0}if(0==n&&0==c.indexOf("funcCallRequired")&&void 0!==l&&(f+=l+"<br/>",g++,_=t.isError=!0),_)break;"string"==typeof l&&(f+=l+"<br/>",t.isError=!0,g++)}!o&&!e.val()&&e.val().length<1&&C.inArray("equals",r)<0&&(t.isError=!1);var a=e.prop("type"),x=e.data("promptPosition")||t.promptPosition,a=(("radio"==a||"checkbox"==a)&&1<s.find("input[name='"+i+"']").size()&&(e=C("inline"===x?s.find("input[name='"+i+"'][type!=hidden]:last"):s.find("input[name='"+i+"'][type!=hidden]:first")),t.showArrow=t.showArrowOnRadioAndCheckbox),e.is(":hidden")&&t.prettySelect&&(e=s.find("#"+t.usePrefix+b._jqSelector(e.attr("id"))+t.useSuffix)),t.isError&&t.showPrompts?b._showPrompt(e,f,v,!1,t):b._closePrompt(e),e.trigger("jqv.field.result",[e,t.isError,f]),C.inArray(e[0],t.InvalidFields));return-1==a?t.isError&&t.InvalidFields.push(e[0]):t.isError||t.InvalidFields.splice(a,1),b._handleStatusCssClasses(e,t),t.isError&&t.onFieldFailure&&t.onFieldFailure(e),!t.isError&&t.onFieldSuccess&&t.onFieldSuccess(e),t.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(e,t,a,r,i,o,s){var n=jQuery.inArray(a,r),n=("custom"!==a&&"funcCall"!==a&&"funcCallRequired"!==a||(a=a+"["+r[n+1]+"]",delete r[n]),a),l=(t.attr("data-validation-engine")?t.attr("data-validation-engine"):t.attr("class")).split(" "),a="future"==a||"past"==a||"maxCheckbox"==a||"minCheckbox"==a?s(e,t,r,i,o):s(t,r,i,o);return null==a||(e=b._getCustomErrorMessage(C(t),l,n,o))&&(a=e),a},_getCustomErrorMessage:function(e,t,a,r){var i=!1,o=/^custom\[.*\]$/.test(a)?b._validityProp.custom:b._validityProp[a];if(null!=o&&null!=(i=e.attr("data-errormessage-"+o)))return i;if(null!=(i=e.attr("data-errormessage")))return i;o="#"+e.attr("id");if(void 0!==r.custom_error_messages[o]&&void 0!==r.custom_error_messages[o][a])i=r.custom_error_messages[o][a].message;else if(0<t.length)for(var s=0;s<t.length&&0<t.length;s++){var n="."+t[s];if(void 0!==r.custom_error_messages[n]&&void 0!==r.custom_error_messages[n][a]){i=r.custom_error_messages[n][a].message;break}}return i=!i&&void 0!==r.custom_error_messages[a]&&void 0!==r.custom_error_messages[a].message?r.custom_error_messages[a].message:i},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(e,t,a,r,i){switch(e.prop("type")){case"radio":case"checkbox":if(i){if(!e.prop("checked"))return r.allrules[t[a]].alertTextCheckboxMultiple;break}var o=e.closest("form, .validationEngineContainer"),s=e.attr("name");if(0==o.find("input[name='"+s+"']:checked").size())return 1==o.find("input[name='"+s+"']:visible").size()?r.allrules[t[a]].alertTextCheckboxe:r.allrules[t[a]].alertTextCheckboxMultiple;break;default:var o=C.trim(e.val()),s=C.trim(e.attr("data-validation-placeholder")),n=C.trim(e.attr("placeholder"));if(!o||s&&o==s||n&&o==n)return r.allrules[t[a]].alertText}},_groupRequired:function(e,t,a,r){var i="["+r.validateAttribute+"*="+t[a+1]+"]",o=!1;if(e.closest("form, .validationEngineContainer").find(i).each(function(){if(!b._required(C(this),t,a,r))return!(o=!0)}),!o)return r.allrules[t[a]].alertText},_custom:function(e,t,a,r){var i=t[a+1],o=r.allrules[i];if(o)if(o.regex){var s=o.regex;if(s)return new RegExp(s).test(e.val())?void 0:r.allrules[i].alertText;alert("jqv:custom regex not found - "+i)}else if(o.func){if("function"==typeof(s=o.func))return s(e,t,a,r)?void 0:r.allrules[i].alertText;alert("jqv:custom parameter 'function' is no function - "+i)}else alert("jqv:custom type not allowed "+i);else alert("jqv:custom rule not found - "+i)},_funcCall:function(e,t,a,r){var i,o=t[a+1];if(-1<o.indexOf(".")){for(var s=o.split("."),n=window;s.length;)n=n[s.shift()];i=n}else i=window[o]||r.customFunctions[o];if("function"==typeof i)return i(e,t,a,r)},_funcCallRequired:function(e,t,a,r){return b._funcCall(e,t,a,r)},_equals:function(e,t,a,r){t=t[a+1];if(e.val()!=C("#"+t).val())return r.allrules.equals.alertText},_maxSize:function(e,t,a,r){t=t[a+1];if(t<e.val().length)return(a=r.allrules.maxSize).alertText+t+a.alertText2},_minSize:function(e,t,a,r){t=t[a+1];if(e.val().length<t)return(a=r.allrules.minSize).alertText+t+a.alertText2},_min:function(e,t,a,r){t=parseFloat(t[a+1]);if(parseFloat(e.val())<t)return(a=r.allrules.min).alertText2?a.alertText+t+a.alertText2:a.alertText+t},_max:function(e,t,a,r){t=parseFloat(t[a+1]);if(t<parseFloat(e.val()))return(a=r.allrules.max).alertText2?a.alertText+t+a.alertText2:a.alertText+t},_past:function(e,t,a,r,i){var o,a=a[r+1],r=C(e.find("*[name='"+a.replace(/^#+/,"")+"']"));if("now"==a.toLowerCase())o=new Date;else if(null!=r.val()){if(r.is(":disabled"))return;o=b._parseDate(r.val())}else o=b._parseDate(a);if(o<b._parseDate(t.val()))return(e=i.allrules.past).alertText2?e.alertText+b._dateToString(o)+e.alertText2:e.alertText+b._dateToString(o)},_future:function(e,t,a,r,i){var o,a=a[r+1],r=C(e.find("*[name='"+a.replace(/^#+/,"")+"']"));if("now"==a.toLowerCase())o=new Date;else if(null!=r.val()){if(r.is(":disabled"))return;o=b._parseDate(r.val())}else o=b._parseDate(a);if(b._parseDate(t.val())<o)return(e=i.allrules.future).alertText2?e.alertText+b._dateToString(o)+e.alertText2:e.alertText+b._dateToString(o)},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,t,a,r){return!(!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value)&&b._isDate(r.firstOfGroup[0].value)&&b._isDate(r.secondOfGroup[0].value)&&b._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2},_dateTimeRange:function(e,t,a,r){return!(!r.firstOfGroup[0].value&&r.secondOfGroup[0].value||r.firstOfGroup[0].value&&!r.secondOfGroup[0].value)&&b._isDateTime(r.firstOfGroup[0].value)&&b._isDateTime(r.secondOfGroup[0].value)&&b._dateCompare(r.firstOfGroup[0].value,r.secondOfGroup[0].value)?void 0:r.allrules[t[a]].alertText+r.allrules[t[a]].alertText2},_maxCheckbox:function(e,t,a,r,i){a=a[r+1],r=t.attr("name");if(a<e.find("input[name='"+r+"']:checked").size())return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+" "+a+" "+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,r,i){a=a[r+1],r=t.attr("name");if(e.find("input[name='"+r+"']:checked").size()<a)return i.showArrow=!1,i.allrules.minCheckbox.alertText+" "+a+" "+i.allrules.minCheckbox.alertText2},_creditCard:function(e,d,t,a){var r=!1,i=e.val().replace(/ +/g,"").replace(/-+/g,""),e=i.length;if(14<=e&&e<=16&&0<parseInt(i)){for(var o,s=0,t=e-1,n=1,l=new String;o=parseInt(i.charAt(t)),l+=n++%2==0?2*o:o,0<=--t;);for(t=0;t<l.length;t++)s+=parseInt(l.charAt(t));r=s%10==0}if(!r)return a.allrules.creditCard.alertText},_ajax:function(s,e,t,n){var e=e[t+1],l=n.allrules[e],e=l.extraData,a=l.extraDataDynamic,r={fieldId:s.attr("id"),fieldValue:s.val()};if("object"==typeof e)C.extend(r,e);else if("string"==typeof e)for(var u=e.split("&"),t=0;t<u.length;t++){var i=u[t].split("=");i[0]&&i[0]&&(r[i[0]]=i[1])}if(a)for(var c=String(a).split(","),t=0;t<c.length;t++){var o,d=c[t];C(d).length&&(o=s.closest("form, .validationEngineContainer").find(d).val(),d.replace("#",""),escape(o),r[d.replace("#","")]=o)}if("field"==n.eventTrigger&&delete n.ajaxValidCache[s.attr("id")],!n.isError&&!b._checkAjaxFieldStatus(s.attr("id"),n))return C.ajax({type:n.ajaxFormValidationMethod,url:l.url,cache:!1,dataType:"json",data:r,field:s,rule:l,methods:b,options:n,beforeSend:function(){},error:function(e,t){n.onFailure?n.onFailure(e,t):b._ajaxError(e,t)},success:function(e){var t,a,r,i=e[0],o=C("#"+i).eq(0);1==o.length&&(t=e[1],a=e[2],t?(n.ajaxValidCache[i]=!0,a?n.allrules[a]&&(r=n.allrules[a].alertTextOk)&&(a=r):a=l.alertTextOk,n.showPrompts&&(a?b._showPrompt(o,a,"pass",!0,n):b._closePrompt(o)),"submit"==n.eventTrigger&&s.closest("form").submit()):(n.ajaxValidCache[i]=!1,n.isError=!0,a?n.allrules[a]&&(r=n.allrules[a].alertText)&&(a=r):a=l.alertText,n.showPrompts&&b._showPrompt(o,a,"",!0,n))),o.trigger("jqv.field.result",[o,n.isError,a])}}),l.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split("-");return(t=t==e?e.split("/"):t)==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(e,t,a,r,i,o){e.data("jqv-prompt-at")instanceof jQuery?e=e.data("jqv-prompt-at"):e.data("jqv-prompt-at")&&(e=C(e.data("jqv-prompt-at")));var s=b._getPrompt(e);o&&(s=!1),C.trim(t)&&(s?b._updatePrompt(e,s,t,a,r,i):b._buildPrompt(e,t,a,r,i))},_buildPrompt:function(e,t,a,r,i){var o=C("<div>");switch(o.addClass(b._getClassName(e.attr("id"))+"formError"),o.addClass("parentForm"+b._getClassName(e.closest("form, .validationEngineContainer").attr("id"))),o.addClass("formError"),a){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}r&&o.addClass("ajaxed");C("<div>").addClass("formErrorContent").html(t).appendTo(o);a=e.data("promptPosition")||i.promptPosition;if(i.showArrow){var s=C("<div>").addClass("formErrorArrow");switch(a="string"==typeof a&&-1!=(n=a.indexOf(":"))?a.substring(0,n):a){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(s),s.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":s.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),o.append(s)}}i.addPromptClass&&o.addClass(i.addPromptClass);var r=e.attr("data-required-class"),n=(void 0!==r?o.addClass(r):i.prettySelect&&(!C("#"+e.attr("id")).next().is("select")||void 0!==(t=C("#"+e.attr("id").substr(i.usePrefix.length).substring(i.useSuffix.length)).attr("data-required-class"))&&o.addClass(t)),o.css({opacity:0}),"inline"===a?(o.addClass("inline"),void 0!==e.attr("data-prompt-target")&&0<C("#"+e.attr("data-prompt-target")).length?o.appendTo(C("#"+e.attr("data-prompt-target"))):e.after(o)):e.before(o),b._calculatePosition(e,o,i));return o.css({position:"inline"===a?"relative":"absolute",top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize,opacity:0}).data("callerField",e),i.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove(),o.remove()})},i.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(e,t,a,r,i,o,s){t&&(void 0!==r&&("pass"==r?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==r?t.addClass("blackPopup"):t.removeClass("blackPopup")),i?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(a),i={top:(r=b._calculatePosition(e,t,o)).callerTopPosition,left:r.callerleftPosition,marginTop:r.marginTopSize},s?t.css(i):t.animate(i))},_closePrompt:function(e){var t=b._getPrompt(e);t&&t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove(),t.remove()})},closePrompt:function(e){return b._closePrompt(e)},_getPrompt:function(e){var t=C(e).closest("form, .validationEngineContainer").attr("id"),e=b._getClassName(e.attr("id"))+"formError",e=C("."+b._escapeExpression(e)+".parentForm"+b._getClassName(t))[0];if(e)return C(e)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var t=C(document),a=C("body"),e=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase();return Boolean(e)},_calculatePosition:function(e,t,a){var r,u,c=e.width(),i=e.position().left,o=e.position().top,s=(e.height(),r=0),n=-t.height(),a=e.data("promptPosition")||a.promptPosition,l="",f=0,d=0;switch("string"==typeof a&&-1!=a.indexOf(":")&&(l=a.substring(a.indexOf(":")+1),a=a.substring(0,a.indexOf(":")),-1!=l.indexOf(",")&&(u=l.substring(l.indexOf(",")+1),l=l.substring(0,l.indexOf(",")),d=parseInt(u),isNaN(d)&&(d=0)),f=parseInt(l),isNaN(l)&&(l=0)),a){default:case"topRight":r+=i+c-27,s+=o;break;case"topLeft":s+=o,r+=i;break;case"centerRight":s=o+4,r=i+e.outerWidth(!(n=0))+5;break;case"centerLeft":r=i-(t.width()+2),s=o+4,n=0;break;case"bottomLeft":s=o+e.height()+5,n=0,r=i;break;case"bottomRight":r=i+c-27,s=o+e.height()+5,n=0;break;case"inline":n=s=r=0}return{callerTopPosition:(s+=d)+"px",callerleftPosition:(r+=f)+"px",marginTopSize:n+"px"}},_saveOptions:function(e,t){C.validationEngineLanguage?a=C.validationEngineLanguage.allRules:C.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page"),C.validationEngine.defaults.allrules=a;var a=C.extend(!0,{},C.validationEngine.defaults,t);return e.data("jqv",a),a},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,a,r){for(var i,o=a+1;o<t.length;o++)if((i=jQuery("#"+t[o]).first()).length&&null==b._required(i,["required"],0,r,!0))return b._required(e,["required"],0,r)},_submitButtonClick:function(e){var t=C(this);t.closest("form, .validationEngineContainer").data("jqv_submitButton",t.attr("id"))}};C.fn.validationEngine=function(e){var t=C(this);return t[0]?"string"==typeof e&&"_"!=e.charAt(0)&&b[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&b.init.apply(t),b[e].apply(t,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void C.error("Method "+e+" does not exist in jQuery.validationEngine"):(b.init.apply(t,arguments),b.attach.apply(t)):t},C.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:C.noop,onBeforeAjaxFormValidation:C.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},C(function(){C.validationEngine.defaults.promptPosition=b.isRTL()?"topLeft":"topRight"})}(jQuery);