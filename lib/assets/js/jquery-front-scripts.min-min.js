function eplGetCookie(e){return EPL_Front_Js.get_cookie(e)}function EPL_Default_Map_Loader(){"undefined"!=typeof EPL_Front_Js&&EPL_Front_Js.default_map&&EPL_Front_Js.default_map()}jQuery(document).ready((function(e){Number.prototype.formatMoney=function(e,t,a){e=isNaN(e=Math.abs(e))?2:e,t=null==t?epl_frontend_vars.decimal_sep:t,a=null==a?epl_frontend_vars.thousand_sep:a;var r,n=this<0?"-":"",l=parseInt(r=Math.abs(+this||0).toFixed(e))+"",s=3<(s=l.length)?s%3:0;return n+(s?l.substr(0,s)+a:"")+l.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(r-l).toFixed(e).slice(2):"")},EPL_Front_Js={init:function(){this.sort_listings(),this.author_tabs(),this.switch_view(),this.set_default_view(),this.listing_search_tabs(),this.field_sliders(),this.epl_search(),this.contact_form_submit();var e=new Event("EPL_Front_Js_ready");document.dispatchEvent(e)},property_search:function(){var t;1==e("#property_id").length&&(t=null,e("#property_id").keyup((function(){if(""==e("#property_id").val())return e(".epl-property-suggestion").fadeOut(),!1;null!=t&&clearTimeout(t);var a=e(this).val();data={action:"epl_search_listing",s:a},t=setTimeout((function(){t=null,e.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){1==e(".epl-property-suggestion").length?e(".epl-property-suggestion").replaceWith(t):e("#property_id").after(t),e(".epl-property-suggestion").fadeIn()}})}),300)})),e(document.body).on("click",".epl-property-suggestion li",(function(t){e("#property_id").val(e(this).data("id")),e(".epl-property-suggestion").fadeOut().remove()})))},sort_listings:function(){jQuery(".epl-sort-listings").on("change",(function(){var e=jQuery(this).val(),t=jQuery(this).data("instance-id"),a=window.location.href;a=EPL_Front_Js.update_url_param(a,"sortby",e);""!=t&&(a=EPL_Front_Js.update_url_param(a,"instance_id",t)),window.location.replace(a)}))},get_cookie:function(e){for(var t,a,r=document.cookie.split(";"),n=0;n<r.length;n++)if(t=r[n].substr(0,r[n].indexOf("=")),a=r[n].substr(r[n].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return unescape(a)},update_url_param:function(e,t,a){var r=-1===(n=e.indexOf("#"))?"":e.substr(n),n=(e=-1===n?e:e.substr(0,n),new RegExp("([?&])"+t+"=.*?(&|$)","i")),l=-1!==e.indexOf("?")?"&":"?";return(e=e.match(n)?e.replace(n,"$1"+t+"="+a+"$2"):e+l+t+"="+a)+r},author_tabs:function(){jQuery("ul.epl-author-tabs li").click((function(){var e=jQuery(this).closest(".epl-author-box-container").attr("id"),t=jQuery(this).attr("data-tab");jQuery("#"+e+" ul.epl-author-tabs li").removeClass("epl-author-current"),jQuery("#"+e+" .epl-author-tab-content").removeClass("epl-author-current"),jQuery(this).addClass("epl-author-current"),jQuery("#"+e+" #"+t).addClass("epl-author-current")}))},default_map:function(){"object"==typeof google&&"object"==typeof google.maps&&e(".epl-map-shortcode").each((function(){var t,a,r,n,l=e(this),s=l.data("cord"),i=l.data("address"),o=l.data("zoom"),p=l.data("id"),c=l.data("suburb_mode");""!=s?(s=s.split(","),new google.maps.Geocoder,s={center:eplmapcord=new google.maps.LatLng(s[0],s[1]),zoom:o},s=new google.maps.Map(l[0],s),new google.maps.Marker({map:s,position:eplmapcord,icon:epl_frontend_vars.image_base+"default.png"})):""!=i&&(s=i,t=c,a=p,r=l,n=o,(eplgeocoder=new google.maps.Geocoder).geocode({address:s},(function(l,s){var i;s==google.maps.GeocoderStatus.OK&&(s={center:l[0].geometry.location,zoom:n},s=new google.maps.Map(r[0],s),i="default.png",1!=t?0<a&&e.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{_epl_nonce:epl_frontend_vars.ajax_nonce,action:"epl_update_listing_coordinates",coordinates:l[0].geometry.location.toString(),listid:a}}).done((function(e){})):i="suburb.png",new google.maps.Marker({map:s,position:l[0].geometry.location,icon:epl_frontend_vars.image_base+i}))})))}))},set_default_view:function(){var e;void 0!==eplGetCookie("preferredView")?(e=this.get_cookie("preferredView"),jQuery('.epl-switch-view ul li[data-view="'+e+'"]').trigger("click")):"grid"==epl_frontend_vars.epl_default_view_type&&jQuery('.epl-switch-view ul li[data-view="grid"]').trigger("click")},switch_view:function(){jQuery(".epl-switch-view ul li").click((function(){var t=jQuery(this).data("view");e.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{action:"epl_update_default_view",view:t}}).done((function(e){})),"undefined"==typeof listingsMasonEnabled&&(jQuery(".epl-switch-view ul li").removeClass("epl-current-view"),jQuery(this).addClass("epl-current-view"),"grid"==t?(jQuery(".epl-property-blog").addClass("epl-listing-grid-view"),jQuery(".epl-listing-grid-view.epl-property-blog").each((function(e){}))):jQuery(".epl-property-blog").removeClass("epl-listing-grid-view"))}))},listing_search_tabs:function(){e(".epl-search-tabs").each((function(){new t(e(this))}));var a=e.getUrlVar("instance_id");let r=e.getUrlVar("form_tab"),n=e('.epl-search-container[data-instance-id="'+a+'"]');n.length&&n.find('li[data-tab="epl_ps_tab_'+r+'"]').length&&setTimeout((()=>{console.log('tab switched li[data-tab="epl_ps_tab_'+r+'"]'),n.find('li[data-tab="epl_ps_tab_'+r+'"]').trigger("click")}),200)},get_url_vars:function(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<a.length;r++)e=a[r].split("="),t.push(e[0]),t[e[0]]=e[1];return t},get_url_var:function(e){return this.get_url_vars()[e]},field_sliders:function(){var t=e(".epl-search-form"),a=epl_frontend_vars.field_sliders;t.each((function(t){var r=e(this);e.each(a,(function(t,a){var n,l,s,i,o,p,c,u;elExists=!0,e.each(a.els,(function(t,a){e("."+a).length?e("."+a).closest(".epl-search-row").hide():elExists=!1})),elExists&&(a.els.length<2?(o=isNaN(Number(e("."+a.els[0]).data("min")))?a.min:Number(e("."+a.els[0]).data("min")),p=isNaN(Number(e("."+a.els[0]).data("max")))?a.max:Number(e("."+a.els[0]).data("max")),u=!1,(c=e("."+a.els[0]+" option").eq(1).val())&&-1!==c.toString().indexOf("-")&&(u=!0),i=o,void 0!==(c=e.getUrlVar(a.els[0]))&&(i=parseInt(c)),e("."+a.els[0]).closest(".epl-search-row").after('<div class="epl-lf-range-slider epl-search-row epl-search-row-select fm-block epl-search-row-full "><label class="epl-search-label fm-label label_'+t+'" for="'+t+'">'+a.label+'</label><div class="field"><div class="'+t+'"></div></div></div>'),u?(n=[o,p],void 0!==c&&-1!==c.toString().indexOf("-")&&(u=c.split("-"),n=[parseInt(u[0]),parseInt(u[1])]),e("."+t).each((function(r){var l=e(this).closest(".epl-lf-range-slider");e(this).slider({range:!0,min:o,max:p,animate:!0,values:n,slide:function(r,n){var s=n.values[0]+"-"+n.values[1];e("."+a.els[0]+" option").remove(),e("."+a.els[0]).append(new Option(n.values[0].formatMoney(0)+"-"+n.values[1].formatMoney(0),s)),e("."+a.els[0]).val(s).change(),s=a.prefix+n.values[0].formatMoney(0)+a.suffix,n=a.prefix+n.values[1].formatMoney(0)+a.suffix;l.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",s).replace("{range_sep}",a.separator||" - ").replace("{range_end}",n))},stop:function(e,t){},create:function(e,r){var s=a.prefix+n[0].formatMoney(0)+a.suffix,i=a.prefix+n[1].formatMoney(0)+a.suffix;l.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",s).replace("{range_sep}",a.separator||" - ").replace("{range_end}",i))}})}))):e("."+t).each((function(r){var n=e(this).closest(".epl-lf-range-slider");e(this).slider({min:o,max:p,range:"min",animate:!0,value:i,slide:function(r,l){e("."+a.els[0]).append(new Option(l.value.formatMoney(0),l.value)),e("."+a.els[0]).val(l.value).change(),n.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",a.prefix+l.value.formatMoney(0)+a.suffix).replace("{range_sep}","").replace("{range_end}",""))},stop:function(e,t){},create:function(e,r){n.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",a.prefix+i.formatMoney(0)+a.suffix).replace("{range_sep}","").replace("{range_end}",""))}})}))):(l=r.find("."+a.els[0]),(s=r.find("."+a.els[1])).find("option").each((function(){e(this).attr("value"),e(this).text()})),i=[l.data("min"),l.data("max")],o=isNaN(Number(l.data("min")))?a.min:Number(l.data("min")),p=isNaN(Number(s.data("max")))?a.max:Number(s.data("max")),c=e.getUrlVar(a.els[0]),u=e.getUrlVar(a.els[1]),void 0!==c&&""!=c&&(c=parseInt(c)),void 0!==u&&""!=u&&(u=parseInt(u)),(void 0!==c&&""!=c||void 0!==u&&""!=u)&&(i=[c,u]),l.closest(".epl-search-row").after('<div class="epl-lf-range-slider epl-search-row epl-search-row-select fm-block epl-search-row-full "><label class="epl-search-label fm-label label_'+t+'" for="'+t+'">'+a.label+'</label><div class="field"><div class="'+t+'"></div></div></div>'),r.find("."+t).each((function(n){var c=e(this).closest(".epl-lf-range-slider");e(this).slider({range:!0,step:0<r.find("."+a.els[1]).has("option").length?Number(r.find("."+a.els[1]+" option:eq(2)").val())-Number(r.find("."+a.els[1]+" option:eq(1)").val()):a.step,min:o,max:p,animate:!0,values:i,slide:function(e,r){l.append(new Option(r.values[0].formatMoney(0),r.values[0])),l.append(new Option(r.values[1].formatMoney(0),r.values[1])),s.append(new Option(r.values[0].formatMoney(0),r.values[0])),s.append(new Option(r.values[1].formatMoney(0),r.values[1])),l.val(r.values[0]).change(),s.val(r.values[1]).change();var n=a.prefix+r.values[0].formatMoney(0)+a.suffix;r=a.prefix+r.values[1].formatMoney(0)+a.suffix;c.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",n).replace("{range_sep}",a.separator).replace("{range_end}",r))},stop:function(e,t){},create:function(e,r){var n=a.prefix+i[0].formatMoney(0)+a.suffix,l=a.prefix+i[1].formatMoney(0)+a.suffix;c.find(".label_"+t).html(a.label+epl_frontend_vars.range_html.replace("{range_start}",n).replace("{range_sep}",a.separator).replace("{range_end}",l))}})}))))}))}))},epl_search:function(){e(".epl-search-form form").on("submit",(function(t){t.preventDefault();var a,r=e(this).serialize().split("&"),n=[];for(a in r)"string"==typeof r[a]&&r[a].split("=")[1]&&n.push(r[a]);t=n.join("&"),t=epl_frontend_vars.site_url+"?"+t,location.href=t}))},contact_form_submit:function(){e(".epl-contact-capture-form form").on("submit",(function(t){var a=e(this);(t=(t.preventDefault(),e(this).serializeArray())).push({name:"action",value:"epl_contact_capture_action"}),e.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:t,dataType:"json"}).done((function(t){e(".epl-contact-widget-msgs").remove(),a.after('<div class="epl-contact-widget-msgs epl-contact-widget-msg-'+t.status+'">'+t.msg+"</div>"),"success"==t.status&&a.trigger("reset")}))}))}};class t{constructor(e){this.$tabContainer=e,this.$tabLinks=this.$tabContainer.find("li.tab-link"),this.$tabContents=this.$tabContainer.parent().find(".epl-search-form"),this.setupListeners()}setupListeners(){this.$tabLinks.on("click",(t=>{this.switchTab(e(t.currentTarget))}))}switchTab(t){var a=t.attr("data-tab");this.$tabLinks.removeClass("epl-sb-current"),this.$tabContents.removeClass("epl-sb-current"),t.addClass("epl-sb-current"),e("#"+a).addClass("epl-sb-current"),this.$tabLinks.trigger("after_tab_switch",{content:e("#"+a),tab_id:a})}}EPL_Front_Js.init()})),jQuery.extend({getUrlVars:function(){return EPL_Front_Js.get_url_vars()},getUrlVar:function(e){return EPL_Front_Js.get_url_var(e)}}),"complete"===document.readyState||"interactive"===document.readyState?EPL_Default_Map_Loader():document.addEventListener("EPL_Front_Js_ready",EPL_Default_Map_Loader),window.EPL_Default_Map_Loader=EPL_Default_Map_Loader;