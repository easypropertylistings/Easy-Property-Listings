@use "../abstracts" as *;

//---------------------------------------------
// Archive Listing
//---------------------------------------------

// ----------------------------------------------- //
// 		  Archive - Helpers                //
// ----------------------------------------------- //
.epl-archive-default {
	width: 100%;
	position: relative;
	max-width: $epl-archive-wrapper--max-width;
	margin: $epl-archive-wrapper--margin;
	padding: $epl-archive-wrapper--padding;
	box-sizing: $epl-archive-wrapper--box-sizing;
	overflow: visible !important;
	z-index: 1;

	//background: $epl-color-grey-f6;
}
.epl-loop-content {
	margin: $epl-archive-wrapper--loop-content-margin;
	padding: $epl-archive-wrapper--loop-content-padding;
}
.epl-shortcode .loop-content,
.epl-template-builder,
.epl-template-blog,
.epl-template-default,
.epl-template-grid,
.epl-template-featured,
.epl-template-trending,
.epl-template-card,
.epl-shortcode-listing-category,
.epl-sd-listings-inner,
.epl-sd-shortcode-content,
.epl-of-listings,
.epl-office-team {
	&:not(.epl-widget) {
		display: grid;
		grid-template-columns: $epl-archive-wrapper__mobile--grid-template-columns;

		margin: 0;
		row-gap: $epl-archive-wrapper--row-gap;
		column-gap: $epl-archive-wrapper--column-gap;

		max-width: 100%;
		margin-left: auto;
		margin-right: auto;

		flex: 1; // Fixes for grid in flexbox.

		min-width: 0;
		min-height: 0;

		outline: $epl-archive-wrapper__mobile--outline;

		@media screen and (max-width: $epl-mobile-width) {
			row-gap: $epl-archive-wrapper__mobile--row-gap;
			column-gap: $epl-archive-wrapper__mobile--column-gap;
		}
	}
}
.epl-shortcode .loop-content,
.epl-template-builder,
.epl-template-blog,
.epl-template-default,
.epl-template-grid,
.epl-template-featured,
.epl-template-trending,
.epl-template-card,
.epl-shortcode-listing-category,
.epl-sd-listings-inner,
.epl-sd-shortcode-content,
.epl-of-listings,
.epl-office-team {
	&:not(
			.epl-widget,
			.epl-grid-list,
			.epl-grid-2,
			.epl-grid-3,
			.epl-grid-4,
			.epl-flex-card
		) {
		@media screen and (min-width: $epl-mobile-width) and (max-width: $epl-ipad-width-portrait) {
			grid-template-columns: $epl-archive-wrapper__tablet-portrait--grid-template-columns;
			outline: $epl-archive-wrapper__tablet-portrait--outline; // pink.
		}

		@media screen and (min-width: $epl-ipad-width-portrait) and (max-width: $epl-ipad-width-landscape) {
			grid-template-columns: $epl-archive-wrapper__tablet-landscape--grid-template-columns;
			outline: $epl-archive-wrapper__tablet-landscape--outline; // teal.
		}

		@media screen and (min-width: $epl-ipad-width-landscape) and (max-width: $epl-laptop-width) {
			grid-template-columns: $epl-archive-wrapper__laptop--grid-template-columns;
			outline: $epl-archive-wrapper__laptop--outline; // orange.
		}
		@media screen and (min-width: $epl-laptop-width) and (max-width: $epl-desktop-width) {
			grid-template-columns: $epl-archive-wrapper__desktop--grid-template-columns;
			outline: $epl-archive-wrapper__desktop--outline; // blue.
		}
		@media screen and (min-width: $epl-desktop-width) {
			grid-template-columns: $epl-archive-wrapper__4k--grid-template-columns;
			outline: $epl-archive-wrapper__4k--outline; // red.
		}
	}
}

$grid_span_3_col: false;

@if $grid_span_3_col {
	// 3 Columns.
	.epl-shortcode .loop-content,
	.epl-template-blog,
	.epl-template-default {
		&:not(.epl-widget, .epl-directory-shortcode-listing) {
			grid-template-rows: 250px;
		}
		.epl-property-blog {
			@media screen and (min-width: $epl-laptop-width) {
				&:nth-of-type(1),
				&:nth-of-type(4),
				&:nth-of-type(5),
				&:nth-of-type(8),
				&:nth-of-type(9),
				&:nth-of-type(12),
				&:nth-of-type(13),
				&:nth-of-type(16),
				&:nth-of-type(17),
				&:nth-of-type(20) {
					grid-column: span 2;
					//outline: 4px pink solid;
				}
			}

			@media screen and (min-width: $epl-ipad-width-landscape) and (max-width: $epl-laptop-width) {
				&:nth-of-type(1),
				&:nth-of-type(4),
				&:nth-of-type(5),
				&:nth-of-type(8),
				&:nth-of-type(9),
				&:nth-of-type(12),
				&:nth-of-type(15),
				&:nth-of-type(18) {
					grid-column: span 2;
					//outline: 4px green solid;
				}
			}
		}
	}
}

$grid_span_4_col: false;

@if $grid_span_4_col {
	// 4 Columns.
	.epl-shortcode .loop-content,
	.epl-template-blog,
	.epl-template-default {
		&:not(.epl-widget, .epl-directory-shortcode-listing) {
			grid-template-rows: 250px;
		}
		.epl-property-blog {
			@media screen and (min-width: $epl-laptop-width) {
				&:nth-of-type(1),
				&:nth-of-type(6),
				&:nth-of-type(7),
				&:nth-of-type(12),
				&:nth-of-type(13),
				&:nth-of-type(18),
				&:nth-of-type(19),
				&:nth-of-type(24),
				&:nth-of-type(25),
				&:nth-of-type(30),
				&:nth-of-type(31) {
					grid-column: span 2;
					// outline: 4px pink solid;
				}
			}

			@media screen and (min-width: $epl-ipad-width-landscape) and (max-width: $epl-laptop-width) {
				&:nth-of-type(1),
				&:nth-of-type(4),
				&:nth-of-type(5),
				&:nth-of-type(8),
				&:nth-of-type(9),
				&:nth-of-type(12),
				&:nth-of-type(15),
				&:nth-of-type(18) {
					grid-column: span 2;
					//outline: 4px green solid;
				}
			}
		}
	}
}

.epl-shortcode {
	.epl-grid-2 {
		&:not(.epl-widget) {
			@media screen and (min-width: $epl-ipad-width-landscape) {
				grid-template-columns: 1fr 1fr;
			}
		}
	}
}

.epl-shortcode {
	.epl-grid-3 {
		&:not(.epl-widget) {
			@media screen and (min-width: $epl-ipad-width-landscape) {
				grid-template-columns: 1fr 1fr 1fr;
			}
		}
	}
}
.epl-shortcode {
	.epl-grid-4 {
		&:not(.epl-widget) {
			@media screen and (min-width: $epl-ipad-width-landscape) {
				grid-template-columns: 1fr 1fr 1fr 1fr;
			}
		}
	}
}
.epl-shortcode {
	&:not(.epl-widget) {
		@media screen and (min-width: $epl-ipad-width-landscape) {
			.epl-flex-card {
				display: flex;
				flex-wrap: wrap;
			}
			.epl-flex-card--center {
				display: flex;
				justify-content: center;
			}
		}
	}
}

.epl-shortcode-listing {
	overflow: visible;
}
.epl-template-featured,
.epl-template-trending {
	grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
	column-gap: 1em;
	row-gap: 1em;

	.epl-stickers-wrapper {
		display: none !important;
	}
}

.epl-template-card {
	grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
	column-gap: 1em;
	row-gap: 1em;
}
.epl-template-trending {
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
}

.epl-loop-tools-wrap,
.loop-footer,
.epl-of-epl-section__title {
	grid-column: 1 / -1;
	margin: 1em 0;
}
.epl-search-not-found-title,
.epl-search-not-found-message {
	grid-column: 1 / -1;
}

.epl-loop-tools-wrap {
	//display: none;
}

// ----------------------------------------------- //
// 		  Archive - Container              //
// ----------------------------------------------- //
.epl-property-blog {
	grid-column: 1 / -1;
}

.epl-property-blog.epl-listing-grid-view,
.epl-property-blog.epl-listing-grid-view-forced {
	grid-column: initial;
	&.hentry {
		//background: transparent;
	}
}

.epl-listing-grid-view,
.epl-listing-grid-view-forced,
.epl-property-blog.epl-listing-grid-view,
.epl-property-blog.epl-listing-grid-view-forced {
	max-width: $epl-property-blog--max-width;
}
